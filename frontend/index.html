<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RouteSafe Navigator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="styles.css" />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script src="main.js" defer></script>
</head>
<body>
  <div class="app-shell">
    <!-- HEADER -->
    <header class="rs-header">
      <div class="rs-header-left">
        <div class="rs-logo-circle">
          <!-- you can drop a real logo here later -->
          <span class="rs-logo-text">RS</span>
        </div>
        <div class="rs-title-block">
          <h1>RouteSafe Navigator</h1>
          <p>Intelligent low-bridge avoidance for HGVs</p>
        </div>
      </div>
      <div class="rs-header-right">
        <div class="rs-pill">v1.1</div>
        <div class="rs-pill secondary">by RouteSafe AI</div>
      </div>
    </header>

    <!-- ERROR BANNER -->
    <div id="errorBanner" class="error-banner" style="display:none;"></div>

    <!-- MAIN CONTENT -->
    <main class="rs-main">
      <!-- LEFT: FORM + SUMMARY -->
      <section class="rs-column">
        <!-- FORM CARD -->
        <div class="card">
          <h2>Plan a Safe Route</h2>
          <p class="card-subtitle">
            Enter UK postcodes and your vehicle height. We’ll check the route
            against low bridges.
          </p>

          <form class="rs-form">
            <label for="startPostcode">Start location</label>
            <input
              id="startPostcode"
              type="text"
              placeholder="e.g. LS27 0BN"
              autocomplete="postal-code"
            />

            <label for="destPostcode">Destination</label>
            <input
              id="destPostcode"
              type="text"
              placeholder="e.g. M31 4QN"
              autocomplete="postal-code"
            />

            <label for="vehicleHeight">Vehicle height (m)</label>
            <input
              id="vehicleHeight"
              type="number"
              step="0.1"
              min="0"
              placeholder="e.g. 4.5"
            />

            <div class="toggle-row">
              <span>Avoid low bridges</span>
              <label class="switch">
                <input id="avoidLowBridges" type="checkbox" checked />
                <span class="slider"></span>
              </label>
            </div>

            <button id="generateRouteBtn" class="primary-btn">
              Generate safe route
            </button>

            <p id="routeStatusText" class="status-text status-info">
              Ready to plan your route.
            </p>
          </form>
        </div>

        <!-- SUMMARY CARD -->
        <div class="card">
          <h2>Route summary</h2>
          <p class="card-subtitle">
            Distance, ETA, and nearest low bridge along your selected route.
          </p>

          <div class="summary-row">
            <div class="summary-item">
              <span class="label">Risk level</span>
              <span id="bridgeRiskText" class="risk-pill risk-low">
                Low risk
              </span>
            </div>
          </div>

          <div class="summary-grid">
            <div class="summary-item">
              <span class="label">Distance</span>
              <span id="distanceText" class="value">–</span>
            </div>
            <div class="summary-item">
              <span class="label">Estimated time</span>
              <span id="timeText" class="value">–</span>
            </div>
            <div class="summary-item full-width">
              <span class="label">Nearest low bridge</span>
              <span id="nearestBridgeText" class="value">
                None on route
              </span>
            </div>
          </div>

          <p class="footnote">
            Uses RouteSafe engine · ORS routing · UK bridge data.
          </p>
        </div>
      </section>

      <!-- RIGHT: MAP -->
      <section class="rs-column">
        <div class="card map-card">
          <div class="map-card-header">
            <h2>Map view</h2>
            <div class="chip-row">
              <span class="chip">
                RouteSafe engine · ORS + UK bridge data
              </span>
            </div>
          </div>
          <div id="map" class="map-container"></div>

          <div class="legend">
            <div class="legend-item">
              <span class="legend-swatch main-route"></span>
              <span>Main route</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch alt-route"></span>
              <span>Alternative route</span>
            </div>
            <div class="legend-item">
              <span class="legend-swatch hazard"></span>
              <span>Low bridge / hazard</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="rs-footer">
      <span>© 2025 · RouteSafe AI · HGV low-bridge protection</span>
    </footer>
  </div>
</body>
</html>